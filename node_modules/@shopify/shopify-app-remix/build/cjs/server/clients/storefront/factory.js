'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var runtime = require('@shopify/shopify-api/runtime');

function storefrontClientFactory({
  params,
  session
}) {
  const {
    api
  } = params;
  return {
    graphql: async (query, options = {}) => {
      const client = new api.clients.Storefront({
        session,
        apiVersion: options.apiVersion
      });
      const apiResponse = await client.query({
        data: {
          query,
          variables: options === null || options === void 0 ? void 0 : options.variables
        },
        tries: options.tries,
        extraHeaders: options.headers
      });
      return new Response(JSON.stringify(apiResponse.body), {
        headers: runtime.flatHeaders(apiResponse.headers)
      });
    }
  };
}

exports.storefrontClientFactory = storefrontClientFactory;
