"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.expectExitIframeRedirect = void 0;
var const_1 = require("./const");
function expectExitIframeRedirect(response, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.shop, shop = _c === void 0 ? const_1.TEST_SHOP : _c, _d = _b.host, host = _d === void 0 ? const_1.BASE64_HOST : _d, _e = _b.destination, destination = _e === void 0 ? "/auth?shop=".concat(shop) : _e;
    expect(response.status).toBe(302);
    var _f = new URL(response.headers.get('location'), const_1.APP_URL), pathname = _f.pathname, searchParams = _f.searchParams;
    expect(pathname).toBe('/auth/exit-iframe');
    expect(searchParams.get('shop')).toBe(shop);
    expect(searchParams.get('exitIframe')).toBe(destination);
    if (host) {
        expect(searchParams.get('host')).toBe(host);
    }
}
exports.expectExitIframeRedirect = expectExitIframeRedirect;
//# sourceMappingURL=expect-exit-iframe.js.map