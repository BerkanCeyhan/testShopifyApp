"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.expectBeginAuthRedirect = void 0;
var const_1 = require("./const");
function expectBeginAuthRedirect(config, response) {
    expect(response.status).toEqual(302);
    var _a = new URL(response.headers.get('location')), hostname = _a.hostname, pathname = _a.pathname, searchParams = _a.searchParams;
    expect(hostname).toBe(const_1.TEST_SHOP);
    expect(pathname).toBe('/admin/oauth/authorize');
    expect(searchParams.get('client_id')).toBe(config.apiKey);
    expect(searchParams.get('scope')).toBe(config.scopes.toString());
    expect(searchParams.get('redirect_uri')).toBe("".concat(config.appUrl, "/auth/callback"));
    expect(searchParams.get('state')).toStrictEqual(expect.any(String));
}
exports.expectBeginAuthRedirect = expectBeginAuthRedirect;
//# sourceMappingURL=expect-begin-auth-redirect.js.map