"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateShopAndHostParams = void 0;
var server_runtime_1 = require("@remix-run/server-runtime");
function validateShopAndHostParams(params, request) {
    var api = params.api, config = params.config, logger = params.logger;
    if (config.isEmbeddedApp) {
        var url = new URL(request.url);
        var shop = api.utils.sanitizeShop(url.searchParams.get('shop'));
        if (!shop) {
            logger.debug('Missing or invalid shop, redirecting to login path', {
                shop: shop,
            });
            throw (0, server_runtime_1.redirect)(config.auth.loginPath);
        }
        var host = api.utils.sanitizeHost(url.searchParams.get('host'));
        if (!host) {
            logger.debug('Invalid host, redirecting to login path', {
                host: url.searchParams.get('host'),
            });
            throw (0, server_runtime_1.redirect)(config.auth.loginPath);
        }
    }
}
exports.validateShopAndHostParams = validateShopAndHostParams;
//# sourceMappingURL=validate-shop-and-host-params.js.map